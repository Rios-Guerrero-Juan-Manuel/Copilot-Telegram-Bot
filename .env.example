# ═══════════════════════════════════════════════════
# TELEGRAM
# ═══════════════════════════════════════════════════
# Bot token from @BotFather
TELEGRAM_BOT_TOKEN=

# Your numeric Telegram user ID (get from @userinfobot)
# Only this user ID will be able to interact with the bot
TELEGRAM_CHAT_ID=

# ═══════════════════════════════════════════════════
# COPILOT CLI
# ═══════════════════════════════════════════════════
# Path to Copilot CLI binary (leave empty to use the one in PATH)
COPILOT_CLI_PATH=

# Default LLM model on startup
# Options: claude-sonnet-4.5, claude-opus-4.6, gpt-5, gpt-5-mini, gpt-4.1, gpt-5.2-codex
COPILOT_DEFAULT_MODEL=claude-sonnet-4.5

# ═══════════════════════════════════════════════════
# PROJECTS
# ═══════════════════════════════════════════════════
# Default working directory when bot starts
DEFAULT_PROJECT_PATH=

# Allowed paths (comma-separated whitelist)
# Example Windows: C:\Users\you\projects,D:\repos
# Example Linux/Mac: /home/you/projects,/opt/repos
ALLOWED_PATHS=

# Restart behavior after allowlist updates
# Wizard setup (/start): restart enabled by default
ALLOWLIST_SETUP_AUTO_RESTART=true
# Admin allowpath confirmations: restart disabled by default
ALLOWLIST_ADMIN_AUTO_RESTART=false

# ═══════════════════════════════════════════════════
# MCP (Model Context Protocol)
# ═══════════════════════════════════════════════════
# Path to Copilot CLI's mcp-config.json file
# Default: ~/.copilot/mcp-config.json
# Windows: C:\Users\<you>\.copilot\mcp-config.json
COPILOT_MCP_CONFIG_PATH=

# Allowed executables for MCP servers (security)
# Whitelist of commands that can be executed as MCP servers
# If not specified, uses default list: node, python, python3, npx, deno, bun (+ .exe/.cmd variants)
# To customize, specify comma-separated commands (basenames only, not full paths)
# Examples:
#   - Node.js only: node
#   - Node + Python: node,python,python3
#   - Include custom: node,python,npx,my-custom-runtime
# IMPORTANT: This prevents execution of unauthorized commands in MCP servers
# MCP_ALLOWED_EXECUTABLES=

# ═══════════════════════════════════════════════════
# PERSISTENCE
# ═══════════════════════════════════════════════════
# Path to SQLite state database (created automatically)
DB_PATH=./data/state.db

# ═══════════════════════════════════════════════════
# LOGGING
# ═══════════════════════════════════════════════════
# Log level: debug | info | warn | error
# - debug: Detailed information for debugging
# - info: General operational information (recommended for production)
# - warn: Warnings that are not critical errors
# - error: Critical errors only
LOG_LEVEL=info

# Directory where log files are stored
# Files are automatically created in this directory
LOG_DIR=./logs

# Maximum size of each log file before rotation
# Examples: 10m (10 MB), 20m (20 MB), 100k (100 KB)
# Default: 20m
LOG_MAX_SIZE=20m

# Log file retention (days)
# Older files are automatically deleted
# Examples: 7d (7 days), 14d (14 days), 30d (30 days)
# Default: 14d
LOG_MAX_FILES=14d

# Date pattern for log file names
# Default: YYYY-MM-DD (generates files like combined-2026-02-10.log)
LOG_DATE_PATTERN=YYYY-MM-DD

# ═══════════════════════════════════════════════════
# BEHAVIOR
# ═══════════════════════════════════════════════════
# Minimum interval (ms) between Telegram message updates
# Shows periodic progress while generating response
# Recommended: 10000 (10 seconds)
TELEGRAM_UPDATE_INTERVAL=10000

# Timeout (ms) to wait for user response in ask_user tool
# Default: 300000 (5 minutes)
ASK_USER_TIMEOUT=300000

# Timeout (ms) for Copilot operations (streaming, response generation)
# Default: 3600000 (60 minutes)
COPILOT_OPERATION_TIMEOUT=3600000

# Interval (ms) before first heartbeat warning
# If no events are received in this time, user is warned
# Default: 300000 (5 minutes)
HEARTBEAT_WARNING_INTERVAL=300000

# Interval (ms) between subsequent heartbeat warnings
# Default: 120000 (2 minutes)
HEARTBEAT_UPDATE_INTERVAL=120000

# Time extension (ms) when using /extend or auto-extending timeout
# Default: 1200000 (20 minutes)
TIMEOUT_EXTENSION_MS=1200000

# Maximum absolute duration (ms) allowed for operations (including extensions)
# Operations CANNOT exceed this limit, even with extensions
# Default: 7200000 (120 minutes / 2 hours)
MAX_TIMEOUT_DURATION=7200000

# Time (ms) for user to confirm extension before timeout
# When an operation reaches timeout, user has this time to decide
# Default: 600000 (10 minutes)
TIMEOUT_CONFIRMATION_TIME=600000

# ═══════════════════════════════════════════════════
# TELEGRAM NETWORK RETRY
# ═══════════════════════════════════════════════════
# Automatic retry system for Telegram network errors
# Uses exponential backoff to recover from temporary failures

# Initial delay (ms) before first retry
# Delay doubles on each retry (exponential backoff)
# Example: 1000ms → 2000ms → 4000ms → 8000ms → 16000ms → 32000ms
# Default: 1000 (1 second)
TELEGRAM_RETRY_INITIAL_DELAY_MS=1000

# Maximum delay (ms) between retries (cap for exponential backoff)
# Prevents excessively long waits on advanced retries
# Default: 32000 (32 seconds)
TELEGRAM_RETRY_MAX_DELAY_MS=32000

# Stale period threshold (ms) to detect blocked operations
# If no SDK events during this time, a warning is logged
# Default: 300000 (5 minutes)
STALE_PERIOD_THRESHOLD_MS=300000

# ═══════════════════════════════════════════════════
# INPUT SIZE LIMITS
# ═══════════════════════════════════════════════════
# Maximum size (bytes) of an individual input message
# Larger messages will be automatically truncated with warning
# Default: 1048576 (1 MB)
# Range: 1024 (1 KB) - 104857600 (100 MB)
MAX_INPUT_SIZE_BYTES=1048576

# Maximum size (bytes) of streaming buffer
# If buffer exceeds this size, a warning is sent to user
# Default: 5242880 (5 MB)
# Range: 10240 (10 KB) - 524288000 (500 MB)
MAX_BUFFER_SIZE_BYTES=5242880

# Maximum simultaneous sessions (one per project)
MAX_SESSIONS=5

# ═══════════════════════════════════════════════════
# INTERNATIONALIZATION (i18n)
# ═══════════════════════════════════════════════════
# Default language for new users
# Options: en (English), es (Spanish)
# Default: en
DEFAULT_LANGUAGE=en

# Supported languages (comma-separated)
# Default: en,es
SUPPORTED_LANGUAGES=en,es
